#!/usr/bin/env node

var program = require('commander');
var assign = require('object.assign');

program.option('-e, --engines', 'use engines version range');
program.option('r, --range [range]', 'range type of major, minor, or patch with filters of lts, even, odd for version string expressions', 'major,even');
program.option('-v, --versions [version]', 'comma-separated list of versions to run against', function (string) {
  return string.split(',');
});
program.option('c, --cache', 'use the cache rather than http for looking up versions');
program.option('-s, --silent', 'suppress logging', false);
program.parse(process.argv);

var args = Array.prototype.slice.call(program.args, 0);
if (args.length < 1) {
  console.log('Missing command. Example usage: nvs --versions 0.10,4,6,14 [command]');
  return process.exit(-1);
}

var nvs = require('..');

nvs(args[0], args.slice(1), assign({ stdio: 'inherit' }, program), function (errors, results) {
  if (errors) {
    for (var index = 0; index < errors.length; errors++) {
      console.log(errors[index].message);
    }
    return process.exit(err.code || -1);
  }
  process.exit(0);
});
